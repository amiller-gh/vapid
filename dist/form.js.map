{"version":3,"file":"form.js","sourceRoot":"","sources":["../lib/form.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,yDAA2C;AAC3C,yCAAmD;AAEnD;;GAEG;AACH,MAAqB,IAAI;IACvB,MAAM,CAAC,KAAK,CAAC,IAAY,EAAE,KAAa,EAAE,MAA8B,EAAE,KAAa,EAAE,KAAa,EAAE,IAAU;QAChH,MAAM,SAAS,GAAG,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAChD,MAAM,aAAa,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC;QACvF,MAAM,UAAU,GAAG,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC;QACzC,MAAM,YAAY,GAAG,KAAK,CAAC,CAAC,CAAC,kDAAkD,KAAK,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;QACpG,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,mBAAmB,IAAI,kBAAkB,MAAM,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;QAC/F,IAAI,MAAM,CAAC,IAAI,EAAE;YACf,SAAS,CAAC,KAAK,CAAC,kBAAkB,CAAC,GAAG,QAAQ,IAAI,EAAE,CAAC;SACtD;QAED,aAAa;QACb,MAAM,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAE3C,OAAO;oBACS,aAAa,GAAG,UAAU,gBAAgB,MAAM,CAAC,IAAI,IAAI,MAAM;sBAC7D,IAAI;YACd,MAAM,CAAC,KAAK,IAAI,kBAAW,CAAC,KAAK,CAAC;YAClC,IAAI;;UAEN,KAAK;UACL,YAAY;aACT,CAAC;IACZ,CAAC;CACF;AAxBD,uBAwBC","sourcesContent":["import * as directives from './directives';\nimport { toTitleCase, Json } from '@universe/util';\n\n/**\n * Renders forms for the dashboard.\n */\nexport default class Form {\n  static field(name: string, label: string, params: Record<string, string>, value: string, error: string, meta: Json) {\n    const directive = directives.find(params, meta);\n    const requiredClass = (directive.attrs.required && !params.default) ? 'required ' : '';\n    const errorClass = error ? 'error ' : '';\n    const errorMessage = error ? `<small class=\"error-message\" aria-role=\"alert\">${error}</small>` : '';\n    const help = params.help ? `<small id=\"help-${name}\" class=\"help\">${params.help}</small>` : '';\n    if (params.help) {\n      directive.attrs['aria-describedby'] = `help-${name}`;\n    }\n\n    // @ts-ignore\n    const input = directive.input(name, value);\n\n    return `\n      <div class=\"${requiredClass}${errorClass}field field__${params.type || 'text'}\">\n        <label for=\"${name}\">\n          ${params.label || toTitleCase(label)}\n          ${help}\n        </label>\n        ${input}\n        ${errorMessage}\n      </div>`;\n  }\n}\n"]}